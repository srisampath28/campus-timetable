<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Segoe UI,sans-serif;
  background:#f1f5f9;
  padding:40px;
}
.card{
  background:white;
  max-width:600px;
  margin:auto;
  padding:20px;
  border-radius:12px;
}
input,select,button{
  width:100%;
  padding:10px;
  margin-top:10px;
}
button{
  background:#4f46e5;
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.list{
  margin-top:20px;
  font-size:14px;
}
</style>
</head>

<body>

<div class="card">
  <h2>Admin Login</h2>
  <input id="password" type="password" placeholder="Admin Password">
  <button onclick="login()">Login</button>

  <div id="panel" style="display:none">
    <hr>
    <h3>Add Timetable Entry</h3>

    <input id="section" placeholder="Section (e.g. CSE-A)">
    <select id="day">
      <option>Monday</option><option>Tuesday</option><option>Wednesday</option>
      <option>Thursday</option><option>Friday</option><option>Saturday</option>
    </select>
    <input id="start" type="time">
    <input id="end" type="time">
    <input id="subject" placeholder="Subject name">

    <button onclick="addEntry()">Add / Save</button>

    <div class="list" id="preview"></div>
  </div>
</div>

<script>
const ADMIN_PASSWORD = "admin123";
let timetable = JSON.parse(localStorage.getItem("timetable")) || {};

function login(){
  if(document.getElementById("password").value === ADMIN_PASSWORD){
    document.getElementById("panel").style.display="block";
  }else{
    alert("Wrong password");
  }
}

function addEntry(){
  const section = section.value.trim();
  const day = document.getElementById("day").value;
  const start = document.getElementById("start").value;
  const end = document.getElementById("end").value;
  const subject = document.getElementById("subject").value.trim();

  if(!section || !start || !end || !subject){
    alert("Fill all fields");
    return;
  }

  timetable[section] = timetable[section] || {};
  timetable[section][day] = timetable[section][day] || [];

  timetable[section][day].push({ start, end, subject });

  localStorage.setItem("timetable", JSON.stringify(timetable));
  showPreview();
  alert("Saved! Student page updated.");
}

function showPreview(){
  let html = "<h4>Current Data</h4>";
  Object.keys(timetable).forEach(sec=>{
    html += `<b>${sec}</b><br>`;
    Object.keys(timetable[sec]).forEach(day=>{
      timetable[sec][day].forEach(c=>{
        html += `${day} | ${c.start}-${c.end} | ${c.subject}<br>`;
      });
    });
    html += "<br>";
  });
  document.getElementById("preview").innerHTML = html;
}

showPreview();
</script>

</body>
</html>
